### 5.4.0 for 1.12.2 (by canitzp & duely)

## Changes

- Item Requirements now have JEI integration. Clicking on an item will bring up its JEI recipe page, if it has one. (duely)
- Converted all instances of String UUIDs into actual UUIDs. (canitzp)
- Fixed a server bug that caused quests to be missing after a rejoin or server restart. (canitzp)
- Quest sync from the server should now work properly, even if the server quests are updated. (canitzp)
- The QDS should now function properly again. (canitzp)
- Tooltips for quests are no longer shown in the "Move" edit mode. (duely)
- Added a task for taming creatures. (duely)
- Potential null pointer error when setting the amounts via the menu avoided. (duely)
- New lines can now be placed in long descriptions by using "\n" (or by pressing enter). (duely)
- Updated zh_CN.lang.
- Added a task for completing an advancement and extended "manually detect" to be potentially used in any quest task. (duely)
- Fixed an error where the mouse pointer could become invisible. (canitzp)
- Potential null point error for Advancement tasks (when a non-existent advancement is specified) removed. (duely)
- Button spacing on the task creation screen has been reduced to properly allow all new tasks to be visible. (duely)
- Quests should properly function in single-player mode again. (duely)
- Using "Select Quest" now provides a visual when the quest has been selected. (duely)
- Potential concurrent modification error while editing quests hopefully avoided. (duely)
- Added a task where the objective is to complete another quest in the book. This task automatically completes when the other quest is completed. (duely)
- Updated the "Edit Location" move to "Edit Information". This mode can be used to change which Advancement is selected for the Advancement task. (duely)
- It is now possible to double-click to select a Quest Set. You no longer have to select it, and then press a button. (duely)
- Improvements to edit mode, including double-click on slots to open the "Item selection" menu for Item-based tasks, and allowing you to use various functions when the current mode is not relevant to the current screen. (soraphis, duely)
- You can now use HOME, END, and ENTER while editing text. Enter will insert a "\n" which will be interpreted as a new line when displayed. (duely)
- Added to the Crafting task: creating or enchanting an item in an Anvil, or getting the results of a smelting operation from a Furnace, now trigger Crafting tasks to check if the result is what they're looking for. This only applies to AnvilRepairEvent and the player event ItemSmeltedEvent, and may not support modded anvils/furnaces that do not implement these events. (duely)
- Added tasks for placing and breaking blocks. While these have been tested relatively extensively with Vanilla blocks, it is possible that modded blocks will not all work, especially if the result of Block::getPickedItem does not match the item stack used to place it. (duely)
- Fixed a long-standing bug where the "Required completed parents" value for a quest is never actually saved, resulting in the information being lost. (duely)
- All serialized data using UTF-8 is now properly split being being transmitted, preventing any errors similar to "too large for this format". This specifically impacts large loot bags, which should now function properly again. (duely)
- Fixed an issue which could mimic the "Required parent complete" error, but in the opposite direction. (duely)
- Resolve one of our longest-standing bugs (#69): clicking "Open set" does not cause you to immediately open any quest that may be directly behind that button. (duely)
- Implemented an "NBT subset" item comparison mode. For example, this would allow you to specify a requirement of a bow enchanted with Infinity, and allow for a bow enchanting with Infinity and also Punch to meet the requirement. See NBT utility file for full attribution (thanks, Darkhax!) (duely, darkhax)
- Switching from "Edit mode" while in single player should no longer place you edit mode on a dedicated server, where changes would not be possible. (duely)
- It is no longer possible to enter "Edit mode" in any fashion while on a dedicated server. The quest editor can only be used in single-player mode. (duely, canitzp)
- Various annoying functionality (such as entering "Move mode" while viewing a quest set, and then exiting out to the quest set overview and not being able to click until the tool is changed) has been improved. (duely)
- Shift-clicking with the Operator Book will now allow you to complete the following (in order of granularity):
  - Individual item requirements, per-task, by hovering over the requirement icon (note that this only applies to item-based quests)
  - Individual tasks, per-quest, by hovering over the task name inside the quest view
  - Quests, by hovering over the quest in the quest set view, as previously (duely)
- Taming tasks now have a placeholder "AbstractHorse" creature which serves as a way of specifying any horse, donkey, mule, etc, is suitable for the task. (duely)
- Setting the target for a "Quest completed" task now provides more instructions. Any click with any tool (except delete), after having selected the relevant quest from the quest view, should be sufficient in order to set the task. Once set, it is not possible to change: it must be deleted and re-created. (duely)
- While peeking for null values (especially in item loot bags), the null value is now actually consumed and discarded, instead of creating a situation where there was an endless loop. (duely)
- The item edit menu no longer allows you to create null or empty entries as requirements or rewards. (duely)
- Selecting a task using the "Select task" button for use with the QDS now outputs a message in chat indicating which task was selected, giving some feedback to indicate that the process was successful. (duely)
- It is now possible to create multiple tasks while in "Create task" mode while viewing a quest, and then click on those individual tasks to begin editing them, without manually changing back to the pointer tool. This change happens automatically now. (duely)
- Tests for single-player environments now function as expected. (duely)
- `/hqm edit` now attempts to place you into edit mode. If used in a dedicated server, it will instead give a warning that editing cannot take place on the server. It will also give a message to operators saying to use `/hqm op` (the new command) to obtain an Operator Book. These messages can be disabled in the configuration. (duely)
- The "Book Open" event is now fired again. This may have negative consequences yet to be foreseen. (duely)
- The "Change Task" button has been removed. This button previously only allowed the changing of item tasks into other tasks, and the documentation for it was very unclear. It may return in the future. (duely)
- Entering a dedicated server with "Edit mode" enabled on your client will give you a message and then disable it on the client side. This means the edit menu, etc, will no longer appear on dedicated servers. (duely)
- Identically named quest sets, quest sets named using Windows reserved names, quest sets that contain characters which cannot be printed to files, and quest sets named "sets", "reputations" or "bags" no longer crash the game. (duely)
- It's no longer possible to include invalid characters, use a Windows reserved file name, include characters which cannot be included in files, or specifically name a quest set "sets", "reputations", or "bags". Identically named quest sets will attempt to append an incrementing number to the end of it, until it finds a valid result (or fails with an error message). (duely)
- Quest sets can now be deleted regardless of whether or not they are empty. Beware: this could result in dramatic data loss. Previously it was only possible to delete a quest set which had all of its quests removed. (duely)
- In addition to double-clicking for item requirements, it's also possible to double-click to on rewards (both specific rewards and selectable rewards) to open the item edit menu. Additionally, you can double-click on an item in your inventory or from the search screen within that window, and it will set the reward or requirement to that item. (duely)
- Tooltips are now rendered using the Microsoft standard, meaning that any additional add-ons you have that add additional information will also have this included. Requirements, etc, are now printed at the bottom of the tooltip. (duely)
- Switched to the annotation-based system of configuration. **This does invalidate all current configurations. If you have made changes, you will need to migrate them into the new configuration file.** (duely)
- It should no longer be possible to build an endless loop of quest requirements or quest options. (duely)
- The Quest book will no longer become unusable after changing dimensions. (duely)
- Hardcore functionality has been improved in Single-Player, meaning that the game will no longer soft-lock while trying to rely on old code systems. (duely)
- Colours for quest sets and their states and quests and their states are no longer hard-coded, but included as part of the new configuration system. Comments should clarify exactly which one is which. Format is #AARRGGBB. (duely)
- Invalid quest triggers (i.e., those registered for other saved games) will no longer carry over to your new world in single-player. This should give a slight performance boost. (duely)
- Tile entities such as the QDS will no longer attempt to broadcast their update packet to everyone in the dimension, just people in the surrounding chunks. (duely)
